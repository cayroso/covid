!function(t){function e(e){for(var s,i,o=e[0],l=e[1],c=e[2],v=0,u=[];v<o.length;v++)i=o[v],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(d&&d(e);u.length;)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={0:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/app/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([67,1]),a()}({42:function(t,e,a){var s=a(43),r=a(44);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1},i=(s(r,n),r.locals?r.locals:{});t.exports=i},44:function(t,e,a){},67:function(t,e,a){"use strict";a.r(e);a(42),a(45);var s=a(17),r=a(41),n=a(29),i=a.n(n),o=a(39),l=a.n(o),c=(a(26),a(25)),d=a.n(c),v={props:{chartId:String,chartData:Array,provinces:Array},data:()=>({chart:null}),async mounted(){this.get()},beforeUpdate:function(){const t=this;t.$nextTick((function(){t.chartData&&t.chartData.length&&t.get()}))},methods:{async get(){const t=this;let e=t.chartData,a=[];e.map(t=>{const e=t.attributes.confirmed,s=d()(e);if(s.isValid()){const t=s.format("MM-DD");a.includes(t)||a.push(t)}}),a.sort();let s=[];t.provinces.forEach((e,r)=>{const n=t.getRandomColor();let i={label:e,borderColor:n,backgroundColor:n,data:[a.length],fill:!1};s.push(i)}),e.forEach(t=>{let e=s.find(e=>e.label==t.province);if(null==e)return;const r=t.attributes.confirmed,n=d()(r);if(n.isValid()){const t=n.format("MM-DD");var i=a.indexOf(t);isNaN(e.data[i])?e.data[i]=1:e.data[i]++}});let r=document.getElementById(t.chartId),n=a;null==t.chart?t.chart=new Chart(r,{type:"line",data:{labels:n,datasets:s},options:{spanGaps:!0,responsive:!0,maintainAspectRatio:!0,title:{display:!0,text:"Cases"},scales:{xAxes:[{}],yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]}}}):(t.chart.data.labels=n,t.chart.data.datasets=s,t.chart.update())},getRandomColor(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}}},u=a(21),p=Object(u.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return this.chartData?e("div",{},[e("div",{staticStyle:{position:"relative"}},[e("canvas",{attrs:{id:this.chartId}})])]):this._e()}),[],!1,null,null,null).exports,f={props:{chartId:String,chartData:Array,provinces:Array},data:()=>({chart:null}),async mounted(){this.get()},beforeUpdate:function(){const t=this;t.$nextTick((function(){t.chartData&&t.chartData.length&&t.get()}))},methods:{async get(){const t=this;let e=t.chartData,a=[];e.forEach(t=>{const e=t.attributes.edad;isNaN(e)||a.includes(e)||a.push(e)}),a.sort();let s=[],r={label:"Ages",backgroundColor:a.map(e=>t.getRandomColor()),data:Array(a.length)};s.push(r),e.forEach(t=>{const e=t.attributes.edad;if(!isNaN(e)){var s=a.indexOf(e);isNaN(r.data[s])?r.data[s]=1:r.data[s]++}});let n=document.getElementById(t.chartId),i=a;null==t.chart?t.chart=new Chart(n,{type:"doughnut",data:{labels:i,datasets:s},options:{responsive:!0,maintainAspectRatio:!0,title:{display:!0,text:"Age"},legend:{display:!1,position:"right"},animation:{animateScale:!0,animateRotate:!0}}}):(t.chart.data.labels=i,t.chart.data.datasets=s,t.chart.update())},getRandomColor(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}}},m=Object(u.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return this.chartData?e("div",{},[e("div",{staticStyle:{position:"relative"}},[e("canvas",{attrs:{id:this.chartId}})])]):this._e()}),[],!1,null,null,null).exports;const h=l.a.create();h.interceptors.request.use(t=>(i.a.start(),t)),h.interceptors.response.use(t=>(i.a.done(),t),t=>{throw i.a.done(),t});var g={components:{LineConfirmedPerDay:p,PieAge:m},data:()=>({busy:!1,hasNextRows:!1,items:[],selectedItem:null,selectedProvince:"",selectedProvinces:[],provinces:[],confirmedPerDay:{options:{responsive:!0,maintainAspectRatio:!1}},pageIndex:1,pageSize:10}),computed:{filteredProvinces(){const t=this;return t.provinces.filter(e=>!t.selectedProvinces.includes(e))},paginated(){const t=this;return t.items.slice((t.pageIndex-1)*t.pageSize,t.pageIndex*t.pageSize)},totalPages(){return Math.ceil(this.items.length/this.pageSize)}},async created(){const t=this;let e=JSON.parse(localStorage.getItem("selectedProvinces"))||[];e.length?t.selectedProvinces=e:t.selectedProvinces=["Cavite","Laguna","Batangas","Rizal","Quezon"],await t.getProvinces(),await t.get()},methods:{movePrevious(){this.pageIndex>1&&this.pageIndex--},moveNext(){this.pageIndex<this.totalPages&&this.pageIndex++},async getProvinces(){const t=this;let e=!1,a=0,s=[];do{let t="https://services5.arcgis.com/mnYJ21GiFTR97WFg/arcgis/rest/services/PH_masterlist/FeatureServer/0/query?f=json"+`&where=1=1&returnDistinctValues=true&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=residence&cacheHint=false&resultOffset=${a}&resultRecordCount=200`;try{await h.get(t).then(t=>{const a=t.data;s=s.concat(a.features),e=a.exceededTransferLimit})}catch(t){alert(t)}a+=201}while(e);t.provinces=[],s.forEach(e=>{let a=t.getProvince(e.attributes.residence);a&&!t.provinces.includes(a)&&t.provinces.push(a)}),t.provinces.sort(),t.selectedProvince=t.filteredProvinces[0]},async get(){const t=this;let e=0,a=[];if(t.items=[],!t.busy)if(t.selectedProvinces.length)try{t.busy=!0;do{let s=encodeURIComponent("1=1");t.selectedProvince.length>0&&(s="",t.selectedProvinces.map((t,e)=>{s+=encodeURIComponent(`${0==e?"":"OR"} residence LIKE '%${t}%' `)}));let r="https://services5.arcgis.com/mnYJ21GiFTR97WFg/arcgis/rest/services/PH_masterlist/FeatureServer/0/query?f=json"+`&where=${s}&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=${"FID,PH_masterl,nationalit,residence,edad,confirmed"}&resultOffset=${e}&resultRecordCount=200`;await h.get(r).then(e=>{const s=e.data;s.features.map(e=>{t.$set(e,"expand",!1),e.province=t.getProvince(e.attributes.residence)}),a=a.concat(s.features),t.hasNextRows=s.exceededTransferLimit}),e+=201}while(t.hasNextRows);t.items=a,t.saveSelectedProvinces()}catch(t){alert(t),localStorage.removeItem("selectedProvinces")}finally{t.busy=!1}else localStorage.removeItem("selectedProvinces")},async getItem(t){const e=this;let a=0,s=[];if(!e.busy&&e.selectedProvinces.length)try{do{let r="https://services5.arcgis.com/mnYJ21GiFTR97WFg/arcgis/rest/services/PH_masterlist/FeatureServer/0/query?f=json"+`&where=${encodeURIComponent(`FID = ${t}`)}&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=${"*"}&resultOffset=${a}&resultRecordCount=200`;try{await h.get(r).then(t=>{const a=t.data;a.features.map(t=>{const e=t.attributes;e.symptoms=e.symptoms.trim(),e.travel_hx=e.travel_hx.trim()}),s=s.concat(a.features),e.hasNextRows=a.exceededTransferLimit})}catch(t){alert(t)}a+=201}while(e.hasNextRows);return s}catch(t){alert(t)}},addProvince(){const t=this;if(!t.selectedProvinces.includes(t.selectedProvince)){let e=t.filteredProvinces.indexOf(t.selectedProvince);t.selectedProvinces.push(t.selectedProvince),e<t.filteredProvinces.length-1&&(t.selectedProvince=t.filteredProvinces[e])}},removeProvince(t){this.selectedProvinces.splice(t,1)},saveSelectedProvinces(){localStorage.setItem("selectedProvinces",JSON.stringify(this.selectedProvinces))},async onProviceChanged(){this.selectedProvince&&await this.get()},getProvince(t){let e=t.split(",");if(1==e.length||2==e.length){var a=e[e.length-1].trim();return e[0].includes("Davao City")&&(a=e[0]),a}return t},async viewPatient(t){var e=await this.getItem(t.FID);this.selectedItem=null,this.$bvModal.show("modal"),this.selectedItem=e[0].attributes}}},b=Object(u.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"card shadow-sm p-2"},[a("div",{staticClass:"row flex-column-reverse flex-md-row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"mr-auto"},[a("div",{staticClass:"form-group align-self-end"},[a("label",{staticClass:"font-weight-bold text-primary"},[t._v("\n                            Selected Province(s)\n                            "),a("span",{staticClass:"px-1 rounded border border-danger text-danger",on:{click:function(e){t.selectedProvinces=[]}}},[a("span",{staticClass:"fas fa-fw fa-eraser mr-1"}),t._v("Clear\n                            ")])]),t._v(" "),a("div",{staticClass:"d-flex align-content-start flex-wrap"},t._l(t.selectedProvinces,(function(e,s){return a("span",{staticClass:"px-1 mr-1 mb-1 rounded border border-success",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.removeProvince(s)}}},[a("span",[t._v("\n                                    "+t._s(e)+"\n                                ")]),t._v(" "),a("span",{staticClass:"fas fa-fw text-danger fa-eraser"})])})),0)])])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"d-flex flex-lg-row"},[a("div",{staticClass:"form-group mb-0 ml-md-auto"},[a("label",{staticClass:"font-weight-bold text-primary"},[t._v("Available Provinces")]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-primary",on:{click:t.addProvince}},[a("span",{staticClass:"fas fa-fw fa-plus"})])]),t._v(" "),a("b-select",{attrs:{options:t.filteredProvinces},scopedSlots:t._u([{key:"first",fn:function(){},proxy:!0}]),model:{value:t.selectedProvince,callback:function(e){t.selectedProvince=e},expression:"selectedProvince"}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",on:{click:t.get}},[a("span",{staticClass:"fas fa-fw fa-sync"})])])],1)])])])])])]),t._v(" "),a("div",{staticClass:"card shadow-sm mt-2 p-1"},[a("b-overlay",{attrs:{show:t.busy}},[t.items?a("line-confirmed-per-day",{attrs:{"chart-id":"c1","chart-data":t.items,provinces:t.selectedProvinces}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"card shadow-sm mt-2 p-1"},[a("b-overlay",{attrs:{show:t.busy}},[t.items?a("pie-age",{attrs:{"chart-id":"c2","chart-data":t.items,provinces:t.selectedProvinces}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"card shadow mt-2"},[a("div",{staticClass:"card-header d-flex flex-row justify-content-between"},[a("h6",{staticClass:"font-weight-bold mb-0 text-primary"},[t._v(" Confirmed Cases")]),t._v(" "),a("h6",{staticClass:"font-weight-bold mb-0 text-primary"},[t._v(" Total: "+t._s(t.items.length))])]),a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"table-responsive mb-0"},[a("table",{staticClass:"table table-bordered table-sm"},[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("PH")]),t._v(" "),a("th",[t._v("Age")]),t._v(" "),a("th",[t._v("Nationality")]),t._v(" "),a("th",[t._v("Residence")]),t._v(" "),a("th",[t._v("Date Confirmed")])])]),t._v(" "),a("tbody",t._l(t.paginated,(function(e,s){return a("tr",[a("td",[t._v(t._s((t.pageIndex-1)*t.pageSize+(s+1)))]),t._v(" "),a("td",[a("span",{staticClass:"text-primary",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.viewPatient(e.attributes)}}},[t._v("\n                                    "+t._s(e.attributes.PH_masterl)+"\n                                ")])]),t._v(" "),a("td",[t._v(t._s(e.attributes.edad))]),t._v(" "),a("td",[t._v(t._s(e.attributes.nationalit))]),t._v(" "),a("td",[t._v(t._s(e.attributes.residence))]),t._v(" "),a("td",[t._v(t._s(e.attributes.confirmed))])])})),0)])])]),t._v(" "),a("div",{staticClass:"card-footer"},[a("b-overlay",{attrs:{show:t.busy}},[a("div",{staticClass:"d-flex flex-row justify-content-between"},[a("div",[a("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.pageIndex=1}}},[a("span",{staticClass:"fas fa-fw fa-angle-double-left"})]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary",on:{click:t.movePrevious}},[a("span",{staticClass:"fas fa-fw fa-angle-left"})])]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageIndex,expression:"pageIndex"}],staticClass:"col-3 text-center  form-control-sm",attrs:{type:"number"},domProps:{value:t.pageIndex},on:{input:function(e){e.target.composing||(t.pageIndex=e.target.value)}}}),t._v(" of "+t._s(t.totalPages)+" Page(s)\n                    ")]),t._v(" "),a("div",[a("button",{staticClass:"btn btn-outline-primary",on:{click:t.moveNext}},[a("span",{staticClass:"fas fa-fw fa-angle-right"})]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.pageIndex=t.totalPages}}},[a("span",{staticClass:"fas fa-fw fa-angle-double-right"})])])])])],1)],1),t._v(" "),a("b-modal",{class:"rounded-0",attrs:{id:"modal","header-class":"bg-gradient-dark rounded-0 p-3","footer-class":"bg-secondary rounded-0 p-2"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h3",{staticClass:"font-weight-bold mb-0 text-white"},[t._v("\n                "+t._s(t.selectedItem.PH_masterl)+"\n            ")])]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-warning",on:{click:function(e){return t.$bvModal.hide("modal")}}},[t._v("Close")])]},proxy:!0},{key:"default",fn:function(){return[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Age")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.edad)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Gender")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.kasarian)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Nationality")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.nationalit)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Residence")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.residence)+"\n                    ")])])]),t._v(" "),t.selectedItem.travel_hx?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Travel History")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.travel_hx)+"\n                    ")])])]):t._e(),t._v(" "),t.selectedItem.symptoms?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Symptoms")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.symptoms)+"\n                    ")])])]):t._e(),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Date Confirmed")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.confirmed)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-4 text-right text-black-50 col-form-label"},[t._v("Facility")]),t._v(" "),a("div",{staticClass:"col"},[a("span",{staticClass:"form-control-plaintext"},[t._v("\n                        "+t._s(t.selectedItem.facility)+"\n                    ")])])])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,_=a(40),y=a.n(_),C=a(70),x=a(72),P=a(71),w=a(69);s.a.use(y.a),s.a.use(C.a),s.a.use(x.a),s.a.use(P.a),s.a.use(w.a),window.moment=a(25),s.a.component("line-chart",{extends:r.a.Line,mounted(){this.renderChart({labels:["January","February","March","April","May","June","July"],datasets:[{label:"Data One",backgroundColor:"#f87979",data:[40,39,10,40,39,80,40]}]},{responsive:!0,maintainAspectRatio:!1})}}),new s.a({el:"#app",components:{App:b}})}});